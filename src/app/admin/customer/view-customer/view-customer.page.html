<ion-content>
	<div class="content">
		<div class="header">
			<div>
				<div>List of Active Customers</div>
				<div style="font-size: 12px; color: #797979">
					showing {{pageLength }} Records
				</div>
			</div>
			<div>
				<button
					appPreventDoubleClick
					(throttledClick)="add()"
					[throttleTime]="500"
					mat-raised-button
					color="primary"
				>
					+ Add Customers
				</button>
			</div>
		</div>

		<div class="row1">
			<div class="search_box">
				<ion-searchbar
					autofocus
					debounce="300"
					placeholder="Search from {{pageLength }} customers, by name / address"
					#mySearchbar
					show-cancel-button="focus"
					(ionClear)="reset()"
					(ionInput)="applyFilter($event.target.value)"
				></ion-searchbar>
			</div>
			<div class="actions">
				<img
					src="/assets/images/svg/download-excel.svg"
					style="cursor: pointer"
					width="32px"
					height="32px"
					(click)="exportCustomerDataToExcel()"
				/>
			</div>
		</div>

		<ng-container>
			<div class="example-container mat-elevation-z8">
				<div class="example-table-container" #epltable>
					<table mat-table [dataSource]="dataSource" multiTemplateDataRows>
						<ng-container matColumnDef="name">
							<th mat-header-cell *matHeaderCellDef>Name</th>
							<td
								mat-cell
								*matCellDef="let element"
								class="m-card-title"
								data-label="Name"
							>
								<div style="padding: 3px">{{element.name}}</div>
								<div style="padding: 3px">
									CR:
									<span style="color: #ef4249">
										{{element.credit_amt | nullzero | currency: "INR"}}</span
									>
									/ DR:
									<span style="color: #ef4249">
										{{element.balance_amt | nullzero | currency: "INR"}}</span
									>
								</div>
								<div style="padding: 3px">
									Last Received {{element.last_paid_date | nulldash }}
								</div>
							</td>
						</ng-container>

						<ng-container matColumnDef="address1">
							<th mat-header-cell *matHeaderCellDef>Registered Address</th>
							<td
								mat-cell
								*matCellDef="let element"
								class="m-card-sub-title"
								data-label="Form type"
							>
								<div style="padding: 3px">{{element.address1}}</div>
								<div style="padding: 3px">{{element.address2 | nullna}}</div>
								<div style="padding: 3px">{{element.district | nullna}}</div>
							</td>
						</ng-container>

						<ng-container matColumnDef="credit">
							<th mat-header-cell *matHeaderCellDef style="text-align: left">
								&nbsp;
							</th>
							<td
								mat-cell
								*matCellDef="let element"
								class="m-card-sub-title"
								data-label="Form type"
							>
								<!-- <div
									(click)="goCustomerFinancials(element)"
									style="
										display: grid;
										grid-template-columns: 1fr 2fr;
										line-height: 24px;
										cursor: pointer;
									"
								> -->
								<div
									style="text-align: left; cursor: pointer"
									(click)="goCustomerFinancials(element)"
								>
									<div>
										<span style="color: blue"> Financial Reports </span>
									</div>
								</div>

								<!-- </div> -->
							</td>
						</ng-container>

						<ng-container matColumnDef="lastpaiddate">
							<th mat-header-cell *matHeaderCellDef>&nbsp;</th>
							<td mat-cell *matCellDef="let element">
								<button
									mat-button
									[matMenuTriggerFor]="menu"
									[matMenuTriggerData]="{element: element}"
								>
									Contact Info
									<img
										src="/assets/images/svg/down-arrow.svg"
										width="12px"
										height="12px"
										alt=""
									/>
								</button>
							</td>
						</ng-container>

						<ng-container matColumnDef="actions">
							<th mat-header-cell *matHeaderCellDef>&nbsp;</th>
							<td mat-cell *matCellDef="let element">
								<button
									mat-button
									[matMenuTriggerFor]="menu1"
									[matMenuTriggerData]="{element: element}"
								>
									Discount Settings
									<img
										src="/assets/images/svg/down-arrow.svg"
										width="12px"
										height="12px"
										alt=""
									/>
								</button>
							</td>
						</ng-container>

						<tr
							mat-header-row
							*matHeaderRowDef="displayedColumns; sticky: true"
						></tr>

						<tr
							class="example-element-row"
							mat-row
							*matRowDef="let row; columns: displayedColumns;"
						></tr>
					</table>
					<div [hidden]="isTableHasData" class="center-message">
						No Data available.
					</div>
				</div>
				<mat-paginator
					[pageSizeOptions]="[50, 100]"
					showFirstLastButtons
				></mat-paginator>
			</div>
			<mat-menu #menu="matMenu">
				<ng-template matMenuContent let-element="element">
					<button mat-menu-item (click)="edit(element)">
						<span> Primary Contact Info</span>
					</button>
					<button mat-menu-item (click)="editShippingAddress(element)">
						<span> Secondary Shipping Address(s)</span>
					</button>
					<!-- <button mat-menu-item (click)="editdefault(element)">
						<span>Default Discounts</span>
					</button>

					<button mat-menu-item (click)="manageBrandDiscounts(element)">
						<span>Discounts By Brand</span>
					</button> -->
				</ng-template>
			</mat-menu>
			<mat-menu #menu1="matMenu">
				<ng-template matMenuContent let-element="element">
					<button mat-menu-item (click)="editdefault(element)">
						<span>Default Discounts</span>
					</button>

					<button mat-menu-item (click)="manageBrandDiscounts(element)">
						<span>Discounts By Brand</span>
					</button>
				</ng-template>
			</mat-menu>
		</ng-container>

		<!-- <ng-container *ngIf="pageLength == 0 && !responseMsg">
			<ion-item
				*ngFor="let fake of [{i: 250, j: 85}, {i:200, j:125},{i:200, j:125},{i:200, j:125},{i:200, j:125},{i:200, j:125},{i:200, j:125},{i:200, j:125},{i:200, j:125},{i:200, j:125}]"
			>
				<ion-label text-wrap>
					<ion-skeleton-text animated style="width: 120px;"></ion-skeleton-text>
					<ion-skeleton-text animated style="width: 150px;"></ion-skeleton-text>
					<ion-skeleton-text animated style="width: 100px;"></ion-skeleton-text>
				</ion-label>
			</ion-item>
		</ng-container> -->
	</div>
</ion-content>
