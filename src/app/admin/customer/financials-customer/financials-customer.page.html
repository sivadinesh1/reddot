<ion-content>
	<div class="screen-header">
		<div>
			<span style="color: #310ac0; cursor: pointer;" (click)="viewAllCustomers()"> All Customers </span> /
			<span style="color: #797979;">{{customerdata?.name}}</span> / <span style="color: #797979;">Financial Transactions</span>
		</div>
		<div>
			&nbsp;
		</div>
	</div>

	<div class="search-wrap">
		<div style="width: 94%; margin: 0 auto; padding-top: 16px;" [@.disabled]="true">
			<mat-tab-group color="primary" [(selectedIndex)]="tabIndex" (selectedTabChange)="tabClick($event)">
				<mat-tab label="Invoices">
					<ng-template [ngTemplateOutlet]="INVTABLE"></ng-template>
				</mat-tab>

				<mat-tab label="Payments">
					<ng-template [ngTemplateOutlet]="PYMTTABLE"></ng-template>
				</mat-tab>

				<mat-tab label="Ledger">
					<ng-template [ngTemplateOutlet]="LEDGERTABLE"></ng-template>
				</mat-tab>
			</mat-tab-group>
		</div>
	</div>

	<ng-template #INVTABLE>
		<ng-container>
			<div class="example-container mat-elevation-z8">
				<div class="example-table-container" #epltable0>
					<table mat-table [dataSource]="saleInvoicedataSource" multiTemplateDataRows>
						<ng-container matColumnDef="invoicedate">
							<th mat-header-cell *matHeaderCellDef>Invoice Date</th>
							<td mat-cell *matCellDef="let element" class="m-card-title">
								{{(element.invoice_date )}}
							</td>
						</ng-container>

						<ng-container matColumnDef="invoiceno">
							<th mat-header-cell *matHeaderCellDef>Inv #</th>
							<td mat-cell *matCellDef="let element" class="m-card-title">
								{{(element.invoice_no)}}
							</td>
						</ng-container>

						<ng-container matColumnDef="paymentstatus">
							<th class="m-txt-field" mat-header-cell *matHeaderCellDef>Payment Status</th>
							<td mat-cell *matCellDef="let element" class="m-txt-field">
								{{(element.payment_status)}}
							</td>
						</ng-container>

						<ng-container matColumnDef="nettotal">
							<th class="m-curr-field" mat-header-cell *matHeaderCellDef>Amount</th>
							<td mat-cell *matCellDef="let element" class="m-curr-field">
								{{(element.invoice_amt)}}
							</td>
						</ng-container>

						<ng-container matColumnDef="paidamt">
							<th class="m-curr-field" mat-header-cell *matHeaderCellDef>Paid Amount</th>
							<td mat-cell *matCellDef="let element" class="m-curr-field">
								{{(element.paid_amount | nullzero)}}
							</td>
						</ng-container>

						<ng-container matColumnDef="balamt">
							<th class="m-curr-field" mat-header-cell *matHeaderCellDef>Balance Amount</th>
							<td mat-cell *matCellDef="let element" class="m-curr-field">
								{{(element.bal_amount | nullzero)}}
							</td>
						</ng-container>

						<ng-container matColumnDef="paybtn">
							<th mat-header-cell *matHeaderCellDef>&nbsp;</th>
							<td mat-cell *matCellDef="let element" class="m-curr-field">
								<button
									*ngIf="element.payment_status !== 'PAID'"
									mat-button
									appPreventDoubleClick
									(throttledClick)="addPayments(element)"
									[throttleTime]="500"
									mat-button
									color="warn"
								>
									Record Payment
								</button>
							</td>
						</ng-container>

						<!-- <ng-container matColumnDef="type">
							<th mat-header-cell *matHeaderCellDef>Type</th>
							<td mat-cell *matCellDef="let element" class="m-card-title">{{element.ledger_detail}}</td>
						</ng-container> -->

						<tr mat-header-row *matHeaderRowDef="saleInvoiceDisplayedColumns; sticky: true"></tr>

						<tr class="example-element-row" mat-row *matRowDef="let row; columns: saleInvoiceDisplayedColumns;"></tr>
					</table>
					<div [hidden]="isTableHasData" class="center-message">
						No Data available.
					</div>
				</div>
				<mat-paginator #InvoiceTablePaginator="matPaginator" [pageSizeOptions]="[100, 200]" showFirstLastButtons></mat-paginator>
			</div>
			<mat-menu #menu="matMenu">
				<ng-template matMenuContent let-element="element">
					<button mat-menu-item>
						<mat-icon>edit </mat-icon>
						<span>Edit</span>
					</button>
				</ng-template>
			</mat-menu>
		</ng-container>
	</ng-template>

	<ng-template #PYMTTABLE>
		<ng-container>
			<div class="example-container mat-elevation-z8">
				<div class="example-table-container" #epltable1>
					<table mat-table [dataSource]="paymentdataSource" multiTemplateDataRows>
						<ng-container matColumnDef="invoiceno">
							<th mat-header-cell *matHeaderCellDef>Invoice #</th>
							<td mat-cell *matCellDef="let element" class="m-card-title">
								INV-{{(element.invoice_no )}}
							</td>
						</ng-container>

						<ng-container matColumnDef="invoicedate">
							<th mat-header-cell *matHeaderCellDef>Invoice Date</th>
							<td mat-cell *matCellDef="let element" class="m-card-title">
								{{(element.invoice_date )}}
							</td>
						</ng-container>

						<ng-container matColumnDef="pymtdate">
							<th mat-header-cell *matHeaderCellDef>Payment Date</th>
							<td mat-cell *matCellDef="let element" class="m-card-title">
								{{(element.pymt_date )}}
							</td>
						</ng-container>

						<ng-container matColumnDef="paymentno">
							<th mat-header-cell *matHeaderCellDef>Pymt #</th>
							<td mat-cell *matCellDef="let element" class="m-card-title">
								{{(element.payment_no)}}
							</td>
						</ng-container>

						<ng-container matColumnDef="paidamt">
							<th class="m-curr-field" mat-header-cell *matHeaderCellDef>Paid Amt</th>
							<td mat-cell *matCellDef="let element" class="m-curr-field">{{element.payment_now_amt}}</td>
						</ng-container>

						<tr mat-header-row *matHeaderRowDef="paymentDisplayedColumns; sticky: true"></tr>

						<tr class="example-element-row" mat-row *matRowDef="let row; columns: paymentDisplayedColumns;"></tr>
					</table>
					<div [hidden]="isTableHasData" class="center-message">
						No Data available.
					</div>
				</div>
				<mat-paginator #PaymentTablePaginator="matPaginator" [pageSize]="100" [pageSizeOptions]="[100, 200]" showFirstLastButtons></mat-paginator>
			</div>
			<mat-menu #menu="matMenu">
				<ng-template matMenuContent let-element="element">
					<button mat-menu-item>
						<mat-icon>edit </mat-icon>
						<span>Edit</span>
					</button>
				</ng-template>
			</mat-menu>
		</ng-container>
	</ng-template>

	<ng-template #LEDGERTABLE>
		<ng-container>
			<div class="example-container mat-elevation-z8">
				<div class="example-table-container" #epltable>
					<table mat-table [dataSource]="ledgerdataSource" multiTemplateDataRows>
						<ng-container matColumnDef="ledgerdate">
							<th mat-header-cell *matHeaderCellDef>Ledger Date</th>
							<td mat-cell *matCellDef="let element" class="m-card-title">
								{{(element.ledger_date | date: 'dd/MMM/yyyy')}}
							</td>
						</ng-container>

						<ng-container matColumnDef="ledgerrefid">
							<th mat-header-cell *matHeaderCellDef>Inv / Pay #</th>
							<td mat-cell *matCellDef="let element" class="m-card-title">
								{{(element.invoice_ref_id === null ? element.payment_ref_id : element.invoice_ref_id)}}
							</td>
						</ng-container>

						<ng-container matColumnDef="type">
							<th mat-header-cell *matHeaderCellDef>Type</th>
							<td mat-cell *matCellDef="let element" class="m-card-title">{{element.ledger_detail}}</td>
						</ng-container>

						<ng-container matColumnDef="creditamt">
							<th class="m-curr-field" mat-header-cell *matHeaderCellDef>Credit</th>
							<td mat-cell *matCellDef="let element" class="m-curr-field">{{element.credit_amt}}</td>
						</ng-container>

						<ng-container matColumnDef="debitamt">
							<th class="m-curr-field" mat-header-cell *matHeaderCellDef>Debit</th>
							<td mat-cell *matCellDef="let element" class="m-curr-field">{{element.debit_amt}}</td>
						</ng-container>

						<ng-container matColumnDef="balamt">
							<th class="m-curr-field" mat-header-cell *matHeaderCellDef>Balance</th>
							<td mat-cell *matCellDef="let element" class="m-curr-field">{{element.balance_amt}}</td>
						</ng-container>

						<tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>

						<tr class="example-element-row" mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
					</table>
					<div [hidden]="isTableHasData" class="center-message">
						No Data available.
					</div>
				</div>
				<mat-paginator #LedgerTablePaginator="matPaginator" [pageSizeOptions]="[100, 200]" showFirstLastButtons></mat-paginator>
			</div>
			<mat-menu #menu="matMenu">
				<ng-template matMenuContent let-element="element">
					<button mat-menu-item>
						<mat-icon>edit </mat-icon>
						<span>Edit</span>
					</button>
				</ng-template>
			</mat-menu>
		</ng-container>
	</ng-template>
</ion-content>
