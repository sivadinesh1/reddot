<ion-content>
	<div class="content">
		<div class="head">
			<div>
				<ion-searchbar
					autofocus
					debounce="300"
					placeholder="Search by part number / description"
					#mySearchbar
					class="search"
					show-cancel-button="focus"
					(ionClear)="reset()"
					(ionInput)="openDialog($event.target.value)"
				></ion-searchbar>
			</div>
			<div class="full-download" (click)="exportCompletedPurchaseToExcel()">
				<span style="font-size: 18px; font-weight: 400; color: blue">
					Download Full Stock
				</span>
				<img
					src="/assets/images/svg/download-excel.svg"
					style="cursor: pointer; position: relative; top: 12px"
					width="32px"
					height="32px"
				/>
			</div>
			<div class="btn-grad add-btn" (click)="add()">
				<mat-icon
					style="
						font-size: 30px;
						width: 30px !important;
						height: 30px !important;
						color: #fff !important;
					"
					>add_circle_outline</mat-icon
				>
				<span style="padding-left: 10px; font-size: 20px">Product</span>
			</div>
		</div>
		<div></div>
		<br /><br />
		<ng-container *ngIf="isTableHasData">
			<div
				class="example-container mat-elevation-z8"
				style="width: 90%; display: grid; margin: 0 auto"
			>
				<div class="row1">
					<div class="row-cnt">
						&nbsp;&nbsp;
						<span
							*ngIf="pageLength >= 50"
							style="font-size: 14px; color: #4a4ccf"
						>
							Showing {{ pageLength }} + matching records
						</span>
						<span
							*ngIf="pageLength < 50"
							style="font-size: 14px; color: #4a4ccf"
						>
							Showing {{ pageLength }} matching records
						</span>
					</div>
				</div>
				<div class="example-table-container" #epltable>
					<table mat-table [dataSource]="dataSource" multiTemplateDataRows>
						<ng-container matColumnDef="productcode">
							<th mat-header-cell *matHeaderCellDef>Product Code</th>
							<td
								mat-cell
								*matCellDef="let element"
								class="m-card-title"
								data-label="Name"
							>
								{{element.product_code}}
							</td>
						</ng-container>

						<ng-container matColumnDef="description">
							<th mat-header-cell *matHeaderCellDef>Description</th>
							<td
								mat-cell
								*matCellDef="let element"
								class="m-card-sub-title"
								data-label="Form type"
							>
								{{element.description}}
							</td>
						</ng-container>

						<ng-container matColumnDef="name">
							<th mat-header-cell *matHeaderCellDef>Brand</th>
							<td
								mat-cell
								*matCellDef="let element"
								class="m-card-title"
								data-label="Name"
							>
								{{element.name}}
							</td>
						</ng-container>

						<ng-container matColumnDef="rackno">
							<th mat-header-cell *matHeaderCellDef>Rack #</th>
							<td
								mat-cell
								*matCellDef="let element"
								class="m-card-title"
								data-label="Name"
							>
								{{element.rackno}}
							</td>
						</ng-container>

						<ng-container matColumnDef="avlstock">
							<th mat-header-cell *matHeaderCellDef>Available Qty</th>
							<td
								mat-cell
								*matCellDef="let element"
								class="m-card-title"
								data-label="Name"
							>
								{{element.available_stock}}
							</td>
						</ng-container>

						<ng-container matColumnDef="mrp">
							<th mat-header-cell *matHeaderCellDef>MRP</th>
							<td
								mat-cell
								*matCellDef="let element"
								class="m-card-title"
								data-label="Name"
							>
								{{element.mrp}}
							</td>
						</ng-container>

						<ng-container matColumnDef="actions">
							<th mat-header-cell *matHeaderCellDef>&nbsp;</th>
							<td mat-cell *matCellDef="let element">
								<button mat-menu-item (click)="edit(element)">
									<mat-icon>edit </mat-icon>
									<span>Edit</span>
								</button>
							</td>
						</ng-container>

						<tr
							mat-header-row
							*matHeaderRowDef="displayedColumns; sticky: true"
						></tr>

						<tr
							class="example-element-row"
							mat-row
							*matRowDef="let row; columns: displayedColumns;"
						></tr>
					</table>
					<div [hidden]="isTableHasData" class="center-message">
						No Data available.
					</div>
				</div>
				<mat-paginator
					[pageSizeOptions]="[10, 20]"
					showFirstLastButtons
				></mat-paginator>
			</div>
		</ng-container>
	</div>
</ion-content>
