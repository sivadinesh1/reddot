<ion-content>
	<div class="screen-header">
		<div>
			New Enquiry
		</div>
		<div>
			<div [matMenuTriggerFor]="menu">
				<span class="s-menu" [matMenuTriggerFor]="menu">
					<img src="/assets/svg/grid-menu.svg" width="20px" height="20px" />
				</span>
			</div>
		</div>
	</div>

	<div class="enq-form">
		<form (ngSubmit)="onSubmit()" [formGroup]="submitForm" class="e-form">
			<div class="list-item">
				<div formArrayName="productarr">
					<div class="item-details" *ngFor="let product of productarr.controls; let idx = index">
						<div class="id">
							{{ idx+1}})
						</div>
						<ng-container [formGroupName]="idx">
							<div>
								<mat-form-field class="example-full-width">
									<textarea
										autofocus="*ngIf=idx === 1"
										matInput
										rows="1"
										formControlName="notes"
										placeholder="Item description"
									></textarea>
								</mat-form-field>
							</div>

							<div>
								<input
									matInput
									type="text"
									class="styl-txt-box-small txt-pad"
									formControlName="quantity"
									(click)="openCurrencyPad(idx)"
									appPreventCutCopyPaste
									id="theItem"
									readonly
								/>
							</div>
							<div>
								<img
									src="/assets/images/svg/trash.svg"
									width="24px"
									height="24px"
									(click)="onRemoveProduct(idx)"
								/>
							</div>
						</ng-container>
					</div>
					<div class="add-item" (click)="addProduct()">
						<span>
							+ Add Item
						</span>
					</div>
				</div>
			</div>
			<div class="o-form">
				<div *ngIf="!customerAdded; else elseBlock" class="add-cust">
					<img
						src="/assets/images/svg/more.svg"
						class="cursor"
						(click)="showAllCustomersComp()"
						width="24px"
						height="24px"
					/>
					&nbsp;&nbsp;
					<div class="add-cust-lbl cursor" (click)="showAllCustomersComp()">Add Customer</div>
				</div>
			</div>

			<div class="actn-btn-sec">
				<div class="add-remarks">
					<mat-form-field class="remarks-txtarea">
						<textarea matInput formControlName="remarks" placeholder="Remarks (Optional)"></textarea>
					</mat-form-field>
				</div>
				<div class="add-items">
					<button
						mat-raised-button
						color="primary"
						type="submit"
						name="action"
						class="cursor"
						[disabled]="!submitForm.valid"
					>
						Add Enquiry
					</button>
				</div>
			</div>
		</form>
	</div>
</ion-content>

<mat-menu #menu="matMenu">
	<button mat-menu-item (click)="openEnquiry()" style="padding-right: 16px; ">
		<span style="padding-right: 16px; ">
			<img src="../../assets/svg/enquiry.svg" width="24px" height="24px" style="vertical-align: middle;" />
		</span>
		<span>Order Queue</span>
	</button>
	<button mat-menu-item (click)="openBackOrder()">
		<span style="padding-right: 16px; ">
			<img src="../../assets/svg/backorder.svg" width="24px" height="24px" style="vertical-align: middle;" />
		</span>
		<span>Back Order</span>
	</button>
	<button mat-menu-item>
		<span style="padding-right: 16px; ">
			<img src="../../assets/svg/logout.svg" width="24px" height="24px" style="vertical-align: middle;" />
		</span>

		<span>Log Out</span>
	</button>
</mat-menu>

<ng-template #elseBlock> {{customerData.name}} </ng-template>
