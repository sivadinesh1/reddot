<div class="screen-header">
	<div>Brands discount for {{ this.elements?.name }}</div>
	<div>
		<img class="cursor" src="/assets/images/svg/close.svg" (click)="close()" width="20px" height="20px" />
	</div>
</div>
<br /><br />
<ng-container>
	<div class="example-container mat-elevation-z8">
		<div class="example-table-container" #epltable>
			<table mat-table [dataSource]="dataSource" multiTemplateDataRows>
				<ng-container matColumnDef="brandname">
					<th mat-header-cell *matHeaderCellDef>Brand Name</th>
					<td mat-cell *matCellDef="let element" class="m-card-title" data-label="Name">{{ element.brand_name }}</td>
				</ng-container>

				<ng-container matColumnDef="type">
					<th mat-header-cell *matHeaderCellDef>Type</th>
					<td mat-cell *matCellDef="let element" class="m-card-title" data-label="Name">{{ element.type }}</td>
				</ng-container>

				<ng-container matColumnDef="gstzero">
					<th mat-header-cell *matHeaderCellDef>GST (0%)</th>
					<td mat-cell *matCellDef="let element" class="m-card-title" data-label="Name">{{ element.gstzero }}</td>
				</ng-container>
				<ng-container matColumnDef="gstfive">
					<th mat-header-cell *matHeaderCellDef>GST (5%)</th>
					<td mat-cell *matCellDef="let element" class="m-card-title" data-label="Name">{{ element.gstfive }}</td>
				</ng-container>
				<ng-container matColumnDef="gsttwelve">
					<th mat-header-cell *matHeaderCellDef>GST (12%)</th>
					<td mat-cell *matCellDef="let element" class="m-card-title" data-label="Name">{{ element.gsttwelve }}</td>
				</ng-container>
				<ng-container matColumnDef="gsteighteen">
					<th mat-header-cell *matHeaderCellDef>GST (18%)</th>
					<td mat-cell *matCellDef="let element" class="m-card-title" data-label="Name">{{ element.gsteighteen }}</td>
				</ng-container>
				<ng-container matColumnDef="gsttwentyeight">
					<th mat-header-cell *matHeaderCellDef>GST (28%)</th>
					<td mat-cell *matCellDef="let element" class="m-card-title" data-label="Name">{{ element.gsttwentyeight }}</td>
				</ng-container>

				<ng-container matColumnDef="actions">
					<th mat-header-cell *matHeaderCellDef>&nbsp;</th>
					<td mat-cell *matCellDef="let element">
						<mat-icon style="cursor: pointer;" (click)="internalEdit(element)">edit</mat-icon>
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>

				<tr
					class="example-element-row"
					[ngClass]="{ selected: selectedRowIndex == row.brand_id }"
					(click)="highlight(row)"
					mat-row
					*matRowDef="let row; columns: displayedColumns"
				></tr>
			</table>
			<div [hidden]="isTableHasData" class="center-message">
				No Data available.
			</div>
		</div>
		<mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
	</div>
</ng-container>

<br /><br />
<div style="font-size: 14px; color: #333333; display: grid; width: 80%; margin: 0 auto;">Choose brand to add discount</div>

<form [formGroup]="submitForm" #myForm="ngForm">
	<div style="display: grid; width: 80%; margin: 0 auto; grid-template-columns: 1fr 1fr; padding: 1rem 0rem;">
		<span *ngIf="mode === 'add'">
			<mat-form-field class="mat-width-brand">
				<mat-label>Brands</mat-label>
				<mat-select formControlName="brand_id">
					<mat-option>Select a brand</mat-option>
					<mat-option *ngFor="let item of brandsList" [value]="item.id">
						{{ item.name }}
					</mat-option>
				</mat-select>
				<mat-error *ngIf="submitForm.get('brand_id').hasError('required')"> This field is <strong>required</strong> </mat-error>
			</mat-form-field>
		</span>

		<span *ngIf="mode === 'update'"> Brand: {{ brandname }} </span>

		<span style="text-align: right; font-size: 13px; color: #666666;">
			Populated with default values
		</span>
	</div>

	<div class="form-wrap">
		<div>
			<mat-form-field class="mat-width-ext">
				<mat-label>Type</mat-label>
				<mat-select formControlName="disctype">
					<mat-option *ngFor="let item of discountType" [value]="item">
						{{ item }}
					</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
		<div>
			<mat-form-field class="mat-width-date" floatLabel="always">
				<mat-label>Effective</mat-label>
				<input matInput formControlName="effDiscStDate" [matDatepicker]="picker1" type="text" (focus)="picker1.open()" />
				<mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
				<mat-datepicker #picker1></mat-datepicker>

				<mat-error
					*ngIf="
						(submitForm.get('effDiscStDate').hasError('required') || submitForm.get('effDiscStDate').hasError('patternInvalid')) &&
						submitForm.get('effDiscStDate').touched
					"
				>
					Invalid (or) Missing entry
				</mat-error>
			</mat-form-field>
		</div>

		<div>
			<mat-form-field class="mat-width-ext">
				<mat-label>GST (0%)</mat-label>
				<input type="number" matInput formControlName="gstzero" />
			</mat-form-field>
		</div>
		<div>
			<mat-form-field class="mat-width-ext">
				<mat-label>GST (5%)</mat-label>
				<input type="number" matInput formControlName="gstfive" />
			</mat-form-field>
		</div>

		<div>
			<mat-form-field class="mat-width-ext">
				<mat-label>GST (12%)</mat-label>
				<input type="number" matInput formControlName="gsttwelve" />
			</mat-form-field>
		</div>
		<div>
			<mat-form-field class="mat-width-ext">
				<mat-label>GST (18%)</mat-label>
				<input type="number" matInput formControlName="gsteighteen" />
			</mat-form-field>
		</div>

		<div>
			<mat-form-field class="mat-width-ext">
				<mat-label>GST (28%)</mat-label>
				<input type="number" matInput formControlName="gsttwentyeight" />
			</mat-form-field>
		</div>
	</div>
	<div style="display: grid; grid-column: 1 / span 5; text-align: left; width: 80%; margin: 0 auto;" class="error">
		{{ responsemsg }}
	</div>

	<div *ngIf="mode === 'add'" style="display: grid; width: 80%; margin: 0 auto; grid-column: 1 / span 5;">
		<div style="text-align: center;">
			<button mat-raised-button color="primary" type="button" (click)="submit('add')">Add Discount</button>
		</div>
	</div>

	<div *ngIf="mode === 'update'" style="display: grid; width: 80%; margin: 0 auto; grid-column: 1 / span 5;">
		<div style="text-align: center;">
			<button mat-raised-button color="primary" type="button" (click)="submit('update')">Update Discount</button>
		</div>
	</div>
</form>
